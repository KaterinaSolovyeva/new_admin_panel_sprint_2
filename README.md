# Панель администратора онлайн-кинотеатра - сервис, который позволит создавать и редактировать записи в базе данных.

- Интерфейс панели администратора настроен стандартными средствами Django.
- В нём можно создавать, редактировать и удалять кинопроизведения, жанры и персон.
- Связи между кинопроизведениями, жанрами и персонами заводятся на странице редактирования кинопроизведения.
- Созданы индексы и ограничения уникальности.
- Все таблицы находятся в схеме content.
- В качестве первичных ключей используется uuid..
- Таблицы описаны в файле models.py.
- settings.py разбит на логические модули
- Чувствительные данные берутся из переменных окружения
- Все тексты переведены на русский с помощью gettext_lazy
- Настроены запуск всех компонентов системы — Django, Nginx и Postgresql — с использованием docker-compose.
- Создано API, возвращающее список фильмов в формате, описанном в openapi-файле, и позволяющий получить информацию об одном фильме.

Проверить результат работы API можно при помощи Postman. Запустите сервер на 127.0.0.1:8000 и воспользуйтесь тестами из файла `movies API.postman_collection.json`. В тестах предполагается, что в вашем API установлена пагинация и выводится по 50 элементов на странице.

## Перенос данных

Создан скрипт для миграции данных из SQLite в PostgreSQL (команда make load_data):

- После применения скрипта все фильмы, персоны и жанры появляются в PostgreSQL.
- Все связи между записями сохранены.
- В коде используются dataclass.
- Данные загружаются пачками по n записей.
- Повторный запуск скрипта не создаёт дублирующиеся записи.
- В коде есть обработка ошибок записи и чтения.


# Как запустить проект:
Создайте env и envdsn файлы в той же директории, где описаны их example файлы

Запустите docker-compose командой:
```
docker-compose up -d
```
Создайте миграции и соберите статику командой:
```
make setup
```
Загрузите данные командой (не забудьте заполнить .envdsn файл в папке django_api/sqlite_to_postgres):
```
make load_data
```
Создайте суперпользователя Django:
```
make admin
```
# Запуск в браузере
- Открытие административного сайта - http://127.0.0.1:80/admin/
- Django Api - http://127.0.0.1:80/api/v1/movies/
- Swagger для тестирования API проекта - http://127.0.0.1:8082

